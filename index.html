<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cartita para mi novia</title>
<style>
  body,html{
    margin:0;
    padding:0;
    font-family:Arial, sans-serif;
    background:#ffeef5;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  .screen{
    display:none;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:20px;
    max-width:600px;
    height:100vh;
  }
  .active{display:flex;}
  h1,h2,p{margin:10px 0;}
  button{
    background:#ff6b9a;
    color:white;
    border:none;
    padding:12px 20px;
    margin:8px;
    border-radius:12px;
    cursor:pointer;
    font-size:16px;
  }
  img{
    max-width:250px;
    border-radius:14px;
    margin:12px 0;
    box-shadow:0 4px 10px rgba(0,0,0,0.15);
  }
  .content{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }

  /* Carta scrollable si es muy larga */
  #cardText{
    background:#fff;
    padding:20px;
    border-radius:18px;
    box-shadow:0 8px 25px rgba(0,0,0,0.2);
    max-width:500px;
    max-height:400px; /* Limita la altura */
    overflow-y:auto;  /* Scroll si el texto es muy largo */
    text-align:center;
    margin-bottom:15px;
  }

  /* Mini reproductor flotante m√°s compacto con bot√≥n circular */
  #musicPlayer{
    display:none;
    position:fixed;
    top:15px;
    right:15px;
    background:#fff;
    padding:10px 15px;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.3);
    z-index:999;
    width:250px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
  }

  #musicPlayer span{
    font-size:14px;
    text-align:center;
  }

  #progressWrapper{
    display:flex;
    align-items:center;
    gap:10px;
    width:100%;
  }

  #playPauseBtn{
    width:25px;   /* antes 30px */
    height:10px;  /* antes 30px */
    font-size:14px; /* antes 16px */
    border-radius:50%;
    border:none;
    background:#ff6b9a;
    color:white;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-shrink:0;
}


  #progressContainer{
    flex:1;
    background:#ddd;
    height:10px;
    border-radius:5px;
    cursor:pointer;
  }
  #progress{
    background:#ff6b9a;
    height:100%;
    width:0%;
    border-radius:5px;
  }

  #timeDisplay{
    font-size:12px;
    color:#333;
    margin-top:3px;
  }
</style>
</head>
<body>

<!-- Pantalla 1 -->
<div id="screen1" class="screen active">
  <h1>Quiero darte este peque√±o detalle, coraz√≥n üíñ</h1>
  <p>Click the button</p>
  <button onclick="goTo('screen2')">Siguiente</button>
</div>

<!-- Pantalla 2 -->
<div id="screen2" class="screen">
  <img src="images/Fondo_carta.jpg" alt="Carta">
  <h2>¬øQuieres abrir el contenido? ‚úâÔ∏è</h2>
  <div>
    <button onclick="goTo('screen3')">Si</button>
    <button onclick="goTo('screenNo')">No</button>
  </div>
</div>

<!-- Pantalla No -->
<div id="screenNo" class="screen">
  <img src="images/Mitsuki.jpg" alt="Triste">
  <h2>Ow... Puedes abrirla, porfa..? </h2>
  <button onclick="goTo('screen2')">De nuevo</button>
</div>

<!-- Pantalla Carta -->
<div id="screen3" class="screen">
  <div class="content">
    <!-- Imagen siempre visible arriba -->
    <img src="images/Mitsukiyaya.jpg" alt="Nosotros">

    <h2>Esta carta es para ti üíå</h2>

    <!-- Contenedor de texto scrollable -->
    <div id="cardText">
      <p>Mi ni√±ita linda,</p>
      <p>
        Hoy quise crear esto solo para ti. Cada d√≠a contigo es un regalo, 
      y no importa lo que pase, siempre ser√°s mi raz√≥n favorita para sonre√≠r.
      Y bueno, quiero aprovechar esta carta para ser totalmente sincera contigo.
      S√© que no est√°s en tu mejor momento y que las cosas en tu casa te pesan mucho, y lo entiendo. No me imagino lo dif√≠cil que debe ser para ti, pero quiero que sepas que no est√°s sola. No quiero que pienses que tus problemas son una carga para m√≠ o que me est√°s perjudicando, porque no es as√≠. Al contrario, me duele verte mal y lo √∫nico que quiero es poder estar a tu lado, escucharte, acompa√±arte y darte el apoyo que necesites, aunque sea solo con mi presencia o mis palabras.
      Te amo demasiado, Perla, y no quiero que ese miedo de lastimarme te haga alejarte de m√≠. Yo no te veo como alguien que me arrastra a sus problemas, sino como alguien con quien quiero compartir tanto lo bueno como lo dif√≠cil. Para m√≠, el amor no es solo estar en los momentos felices, sino tambi√©n en los complicados, y yo quiero estar contigo en ambos.
      S√© que hemos tenido momentos duros, y entiendo que a veces sientas que no eres una buena novia, pero para m√≠ eres una novia incre√≠ble, porque a pesar de todo sigues aqu√≠, sigues queri√©ndome y sigues luchando a tu manera. Y si en alg√∫n momento yo tambi√©n fallo, no significa que no te ame o que no quiera estar contigo, significa que somos humanas y que juntas podemos aprender y mejorar.
      Y en verdad, jam√°s quiero perderte de nuevo. Quiero hacer bien las cosas contigo mi ni√±a, porque eres una parte fundamental de mi vida. Desde que estamos juntas, no he dejado de sentir cu√°nto te amo, y aunque tengamos altibajos, mi amor por ti no cambia. Eres mi vida, mi persona, y lo que m√°s deseo es que podamos superar cada problema juntas.
      No quiero que tengas miedo de lastimarme, porque lo √∫nico que me doler√≠a de verdad ser√≠a perderte. As√≠ que, por favor, cuando sientas que todo es demasiado, recu√©rdate que estoy aqu√≠, que puedes hablarme, que no tienes que guardarlo sola. Yo quiero escucharte y quiero ser ese refugio que te d√© calma, aunque sea un ratito.
      Perla, gracias por amarme como lo haces, gracias por ser tu. Te amo, y lo √∫nico que quiero es seguir caminando contigo, a tu paso, sin presiones, pero con la certeza de que nos tenemos la una a la otra.
      Tal vez esta carta no es mucho, pero es mi forma de decirte o expresarte un poco lo que siento por ti, mi ni√±a hermosa. Recuerda que te amo con todo mi ser y que cualquier cosa, problema o incomodidad que haya en nuestra relaci√≥n podremos solucionarlo las dos.
      </p>
      <p>Con amor,<br/>Jocelyn.</p>
    </div>
  </div>

  <button onclick="startOver()">Start Over</button>
</div>

<!-- Mini reproductor flotante compacto con bot√≥n circular -->
<div id="musicPlayer">
  <span>üéµ Esta canci√≥n es para ti üíó</span>
  <div id="progressWrapper">
    <button id="playPauseBtn">‚è∏Ô∏è</button>
    <div id="progressContainer" onclick="setProgress(event)">
      <div id="progress"></div>
    </div>
  </div>
  <div id="timeDisplay">0:00 / 0:00</div>
</div>

<audio id="song" preload="metadata" src="music/Gongoli (2012).mp4"></audio>

<script>
const song = document.getElementById("song");
const musicPlayer = document.getElementById("musicPlayer");
const playPauseBtn = document.getElementById("playPauseBtn");
const progress = document.getElementById("progress");
const progressContainer = document.getElementById("progressContainer");
const timeDisplay = document.getElementById("timeDisplay");

function goTo(screenId){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  const screen = document.getElementById(screenId);
  screen.classList.add('active');

  if(screenId==="screen3"){
    // Mostrar reproductor SOLO cuando la carta ya est√° visible
    requestAnimationFrame(()=>{
      musicPlayer.style.display="flex";
      song.play().catch(()=>{});
      playPauseBtn.textContent="‚è∏Ô∏è";
    });
  } else {
    musicPlayer.style.display="none";
  }
}

function startOver(){
  song.pause();
  song.currentTime=0;
  musicPlayer.style.display="none";
  goTo("screen1");
}

// Control de play/pause
playPauseBtn.addEventListener("click",()=>{
  if(song.paused){
    song.play();
    playPauseBtn.textContent="‚è∏Ô∏è";
  }else{
    song.pause();
    playPauseBtn.textContent="‚ñ∂Ô∏è";
  }
});

// Actualizar barra de progreso y tiempo
song.addEventListener("timeupdate", ()=>{
  const percent = (song.currentTime / song.duration)*100;
  progress.style.width = percent + "%";

  let minutes = Math.floor(song.currentTime / 60);
  let seconds = Math.floor(song.currentTime % 60);
  if(seconds<10) seconds="0"+seconds;

  let totalMinutes = Math.floor(song.duration / 60) || 0;
  let totalSeconds = Math.floor(song.duration % 60) || 0;
  if(totalSeconds<10) totalSeconds="0"+totalSeconds;

  timeDisplay.textContent = `${minutes}:${seconds} / ${totalMinutes}:${totalSeconds}`;
});

// Cambiar tiempo al hacer click en la barra
function setProgress(e){
  const width = progressContainer.clientWidth;
  const clickX = e.offsetX;
  const duration = song.duration;
  song.currentTime = (clickX / width) * duration;
}
</script>

</body>
</html>


